(()=>{"use strict";const t="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/A1FaHaIXEojEjknuBOqG",n=async(t=0)=>{const n=await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${t}&limit=20`);return await n.json()},e=async t=>{const n=await fetch(`https://pokeapi.co/api/v2/pokemon/${t}`);return await n.json()},s=document.querySelector(".popup-section"),a=async n=>{const a=await e(n),i=await(async n=>{try{const e=await fetch(`${t}/comments?item_id=${n}`),s=await e.json();return(t=>{t.length&&(document.querySelector(".comment-counts").innerHTML+=` (${t.length})`)})(s),s}catch(t){return`error found${t}`}})(n);let o=void 0===i.length?0:i.length;const c=400===i?.error?.status?"No comments found":i.map((t=>`<p><span class="date">${t.creation_date}</span> | <span class="username">${t.username}:</span><span class="user-message">${t.comment}</span></p>`)).join("");s.innerHTML="",s.hidden=!1;const l=`<div class="popup">\n\t\t\t\t<svg class="close-btn" viewBox="0 0 24 24">\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\td="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t\t<div class="popup-header">\n\t\t\t\t\t<div class="popup-img">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=${a.sprites.other.home.front_shiny}\n\t\t\t\t\t\t\talt="${a.name} image"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<h3 class="popup-title">${a.name}</h3>\n                        <div class="category type-popup">\n                        ${p(a.types)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="stats">\n\t\t\t\t\t\t<h3>Base stats:</h3>\n\t\t\t\t\t\t<li class="each-stat" title="weight">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M12,3A4,4 0 0,1 16,7C16,7.73 15.81,8.41 15.46,9H18C18.95,9 19.75,9.67 19.95,10.56C21.96,18.57 22,18.78 22,19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19C2,18.78 2.04,18.57 4.05,10.56C4.25,9.67 5.05,9 6,9H8.54C8.19,8.41 8,7.73 8,7A4,4 0 0,1 12,3M12,5A2,2 0 0,0 10,7A2,2 0 0,0 12,9A2,2 0 0,0 14,7A2,2 0 0,0 12,5Z"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.weight}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="height">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M7,2C8.78,2 9.67,4.16 8.42,5.42C7.16,6.67 5,5.78 5,4A2,2 0 0,1 7,2M5.5,7H8.5A2,2 0 0,1 10.5,9V14.5H9V22H5V14.5H3.5V9A2,2 0 0,1 5.5,7M21,8H15V10H21M21,11H18V13H21M21,2H15V4H21M21,5H18V7H21M21,14H15V16H21M21,20H15V22H21M21,17H18V19H21"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.height}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="HP">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path fill="currentColor" d="M18 14H14V18H10V14H6V10H10V6H14V10H18" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[0].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="Attack">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M6.92,5H5L14,14L15,13.06M19.96,19.12L19.12,19.96C18.73,20.35 18.1,20.35 17.71,19.96L14.59,16.84L11.91,19.5L10.5,18.09L11.92,16.67L3,7.75V3H7.75L16.67,11.92L18.09,10.5L19.5,11.91L16.83,14.58L19.95,17.7C20.35,18.1 20.35,18.73 19.96,19.12Z"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[1].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="Defense">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[2].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="Special Attack">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M6.2,2.44L18.1,14.34L20.22,12.22L21.63,13.63L19.16,16.1L22.34,19.28C22.73,19.67 22.73,20.3 22.34,20.69L21.63,21.4C21.24,21.79 20.61,21.79 20.22,21.4L17,18.23L14.56,20.7L13.15,19.29L15.27,17.17L3.37,5.27V2.44H6.2M15.89,10L20.63,5.26V2.44H17.8L13.06,7.18L15.89,10M10.94,15L8.11,12.13L5.9,14.34L3.78,12.22L2.37,13.63L4.84,16.1L1.66,19.29C1.27,19.68 1.27,20.31 1.66,20.7L2.37,21.41C2.76,21.8 3.39,21.8 3.78,21.41L7,18.23L9.44,20.7L10.85,19.29L8.73,17.17L10.94,15Z"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[3].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="Special defense">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill="currentColor"\n\t\t\t\t\t\t\t\t\td="M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M15.08 16L12 14.15L8.93 16L9.74 12.5L7.03 10.16L10.61 9.85L12 6.55L13.39 9.84L16.97 10.15L14.26 12.5L15.08 16Z"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[4].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="each-stat" title="Speed">\n\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t<path fill="currentColor" d="M11 15H6L13 1V9H18L11 23V15Z" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>${a.stats[5].base_stat}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="popup-form">\n\t\t\t\t\t<h3 class="popup-title comment-count">Comments (${o})</h3>\n\t\t\t\t\t\t<div class="messages">\n\t\t\t\t\t\t\t${c}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<form action="post" class="form">\n\t\t\t\t\t\t<input id="name" class="input-name" type="text" placeholder="Your name" required />\n\t\t\t\t\t\t<textarea class="input-name" type="text" id="comment" name="comment" row="3" placeholder="Leave your message" required></textarea>\n                        <button type="submit" class="comment-btn">Comment</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>`;s.innerHTML=l,document.querySelector(".close-btn").addEventListener("click",(()=>{s.hidden=!0}));const r=document.querySelector(".messages");document.querySelector(".form").addEventListener("submit",(async n=>{n.preventDefault();const e=document.querySelector(".input-name"),s=document.getElementById("comment");(async(n,e,s)=>{await fetch(`${t}/comments`,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({item_id:n,username:e,comment:s})})})(a.id,e.value,s.value);const i=`<p><span class="date">${(new Date).toISOString().split("T")[0]}</span> | <span class="username">${e.value}:</span><span class="user-message">${s.value}</span></p>`;"No comments found"===r.textContent.trim()&&(r.textContent=""),r.insertAdjacentHTML("beforeend",i),o+=1,document.querySelector(".comment-count").innerText=`Comments (${o})`,e.value="",s.value=""}))},i=document.querySelector(".all-cards"),o=localStorage.getItem("liked")?JSON.parse(localStorage.getItem("liked")):[],c=document.querySelector(".all-cards"),l=(".spinner-section",document.querySelector(".spinner-section"));const r=async n=>{l.innerHTML='<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pok%C3%A9_Ball_icon.svg/2052px-Pok%C3%A9_Ball_icon.svg.png"\nalt="" class="spinner">';const s=await(async()=>{const n=await fetch(`${t}/likes/`);return await n.json()})();n.forEach((async t=>{const n=await e(t.name),a=s.find((t=>t.item_id===n.id)),i=a?a.likes:"",l=o.includes(n.id)?"‚ù§Ô∏è":"üñ§",r=`<div class="card" data-id=${n.id}>\n\t\t\t\t<div class="card-img">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=${n.sprites.other.home.front_shiny}\n\t\t\t\t\t\tclass="pokemon-img"\n\t\t\t\t\t\talt="${t.name} image"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="card-info">\n\t\t\t\t\t<div class="info">\n\t\t\t\t\t\t<h3 class="title">${t.name}</h3>\n\t\t\t\t\t\t<div class="category">\n                        ${p(n.types)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="likes"><span class="heart" id=${n.id}>${l}</span> <span class="count">${i}</span></div>\n\t\t\t\t</div>\n\t\t\t</div>`;c.insertAdjacentHTML("beforeend",r)})),l.innerHTML=""},p=t=>{let n="";return t.forEach((t=>{n+=`<span class=${t.type.name}>${t.type.name}</span>`})),n};let d=0,m=!0;const u=document.getElementById("select"),L=document.querySelector(".all-cards"),h=document.querySelector(".highlight"),v=async()=>{if(m&&window.scrollY+window.innerHeight>=document.body.offsetHeight-400){m=!1,d+=20;const{results:t}=await n(d);await r(t),m=!0}},g=async()=>{const e=await(async()=>{const t=await fetch("https://pokeapi.co/api/v2/pokemon");return(await t.json()).count})();h.innerHTML="",h.insertAdjacentHTML("beforeend",e);const{results:s}=await n();r(s),window.addEventListener("scroll",v),i.addEventListener("click",(n=>{if(n.target.classList.contains("heart")){const e=+n.target.id;if(!o.includes(e)){o.push(e),n.target.innerHTML="‚ù§Ô∏è",localStorage.setItem("liked",JSON.stringify(o)),(async n=>{await fetch(`${t}/likes/`,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)})})({item_id:e});const s=n.target.nextElementSibling,a=+s.textContent;s.textContent=a+1}}else if(n.target.closest(".card")){const t=n.target.closest(".card").dataset.id;a(t)}}))};g(),u.addEventListener("change",(async()=>{const t=+u.value;if(0===t)return L.innerHTML="",void g();window.removeEventListener("scroll",v);const n=(await(async t=>{const n=await fetch(`https://pokeapi.co/api/v2/pokemon-habitat/${t}`);return await n.json()})(t)).pokemon_species;L.innerHTML="",await r(n)}))})();